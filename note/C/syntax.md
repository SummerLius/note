# C
<!-- TOC -->

- [C](#c)
    - [概览](#概览)
        - [编译器代码分析](#编译器代码分析)
    - [程序结构](#程序结构)
        - [变量类型](#变量类型)
            - [局部变量](#局部变量)
            - [外部变量](#外部变量)
        - [声明](#声明)
            - [存储类型](#存储类型)
            - [类型限定](#类型限定)
            - [类型说明符](#类型说明符)

<!-- /TOC -->


## 概览

### 编译器代码分析

1. 词法分析
2. 语法分析
3. 语义分析

ISO/IEC 9899 2011关于C的标准文档：
- 概念（Concepts）
- 转换（Conversions）
- 词法单元（词汇）（Lexical elements）
- 表达式（Expressions）
- 申明（Declarations）
- 语句、语句块（Statements and blocks）
- 外部定义（External definitions）
- 预处理指令

## 程序结构

### 变量类型

1. 变量具有块作用域，含有大括号{}的语句，都是具有块作用域

#### 局部变量

1. 函数体内的声明的变量称为该函数的**局部变量**
2. 局部变量性质
    - **自动存储期限**：生命周期随函数
    - **块作用域**
3. 静态局部变量：前面加上static
    - **静态存储期限**：该变量生命周期不随函数，而是整个程序，拥有固定的存储单元
    - **块作用域**
4. 形参局部变量：性质和局部变量一样


#### 外部变量

1. 声明在函数体外的变量称为**外部变量**
2. 外部变量性质
    - **静态存储期限**：如同static声明的局部变量，拥有整个程序的生命周期，有固定的存储单元
    - **文件作用域**：拥有整个**文件的作用域**，从变量被声明的点开始一直到文件的末尾。 
3. 外部变量可以被不同的函数共享，但不要太依赖，不要随意修改共享的外部变量值，不注意的话可能产生错误、冲突。除非指用作只读或const修饰，不过只读的话，也可以使用宏。

### 声明

`声明说明符 声明符`

- 声明变量
- 声明函数

声明说明符（declaration specifier）描述声明的变量或函数的性质。  
声明符（declarator）给出它们的名字。

声明说明符几大类型：
1. 存储类型：auto、static、extern、register。最多出现一种，且必须放在最前面。
2. 类型限定：c89有两种，const和volatile。c99还有一个restrict，仅用于指针。声明可以包含0个或多个限定符。
3. 类型说明符：即void、char、short、int、long、float、double、signed、unsigned、enum、union、struct等。用typeof创建的类型也是类型说明符。
4. 函数说明符：此类型仅c99后版本才有，且仅有一个，即inline。

类型限定符和类型说明符必须跟随在存储类型的后面，但两者类型顺序没有限制。

声明符：
1. 普通变量：`标识符`
2. 数组变量：`标识符[]`
3. 指针变量：`*标识符`
4. 函数：`标识符()`
5. ...


#### 存储类型

c程序中每个变量都具体以下3个性质：
1. **存储期限**：决定变量的生命周期。
2. **作用域**：具有块作用域和文本作用域。
3. **链接**：确定程序不同部分可以共享此变量的范围。
    - 外部链接：的变量可以被程序中几个或全部文件共享
    - 内部链接：的变量只属于单独一个文件
    - 无链接：的变量属于单独的一个函数

变量的默认存储期限、作用域和链接都依赖于变量声明的位置：
- 在块：内部声明的变量：auto存储、块作用域、并且无链接
- 程序最外层：声明的的变量：static存储、文本作用域、外部链接

大多数情况下，默认的变量性质就足够了。



变量的存储类型：
1. auto类型存储仅对属于块的变量有效
2. static类型，可以用于全部变量，无需考虑声明位置。但产生效果些许不同
    - 块外部static声明：`static int i`，对比默认，改变了链接：外部->内部
        - 静态存储
        - 文本作用域
        - 内部链接
    - 块内部static声明：`void f(void){ static int j; }`，对比默认，改变了存储：auto->static
        - 静态存储
        - 块作用域
        - 无链接
3. extern类型：使得几个源文件可以共享同一个变量。待定...
4. register类型要求编译器把变量存储在寄存器中，而不像其它保存在内存中。指明存储类型为register，对编译器来说是一种请求，不是命令。该类型，目前不做了解。


函数的存储类型：
1. extern：指定函数具有外部链接
2. static：指定函数具有内部链接

函数默认是extern类型

#### 类型限定

- const
- volatile
- restrict

#### 类型说明符















