<!-- TOC -->

- [semver](#semver)
    - [Install](#install)
    - [Usage](#usage)
    - [Versions](#versions)
    - [Ranges](#ranges)
        - [Prerelease Tags](#prerelease-tags)
        - [Advanced Range syntax](#advanced-range-syntax)
        - [Range Grammar](#range-grammar)
    - [Functions](#functions)

<!-- /TOC -->

# semver

The semantic versioner for npm

## Install

```sh
npm install semver [-g]
```

## Usage

- 作为一个node模块
    ```javascript

    ```
- 作为一个命令行工具
    ```sh
    ```

## Versions

## Ranges

- 版本范围，由一系列比较表达式组成
- 比较表达式（comparators）
    - 组成：`operator` 和 `version`
- **`operator`**
    - 基本符号
        - `<`
        - `<=`
        - `>`
        - `=>`
        - `=`
- 逻辑：空格表示与，||表示或
- 举例：
    - `>=1.2.7 <1.3.0`：相当于 1.2.7 <= version < 1.3.0
    - `1.2.7 || >=1.2.9 <2.0.0`
    - 
    

### Prerelease Tags

暂略

### Advanced Range syntax

- **Hyphen Ranges**：`X.Y.Z - A.B.C`
    - 版本号不是完整的，前一个版本好缺省的部分以最小处理，即以0填充；后一个版本号缺省部分以最大处理
    - 例如：
        - `1.2.3 - 2.3.4` 等同于 `>=1.2.3 <=2.3.4`
        - `1.2 - 2.3.4` 等同于 `>=1.2.0 <=2.3.4` 
        - `1.2.3 - 2.3` 等同于 `>=1.2.3 <2.4.0`
        - `1.2.3 -2` 等同于 `>=1.2.3 <3.0.0`
- **X-Ranges**：`1.2.x`、`1.X`、`1.2.*`、`*`
    - `X|x|*` 三个符号中任意一个都可以表示 `[major, minor, patch]` 其中的一部分
    - 例如：
        - `*` 等同于 `>=0.0.0`
        - `1.x` 等同于 `>=1.0.0 <2.0.0`
        - `1.2.x` 等同于 `>=1.2.0 <1.3.0`
    - 单独的非完整版本号会被当作 `X-Range` 处理：
        - `""`（空串）等同于 `*` 等同于 `>=0.0.0`
        - `1` 等同于 `1.x` 等同于 `>=1.0.0 <2.0.0`
        - `1.2` 等同于 `1.2.x` 等同于 `>=1.2.0 <1.3.0`
- **Tilde Ranges**：`~1.2.3`、`~1.2`、`~1`
    - 如果 `[minor]` 版本位指定了，则允许 `[patch]` 位在不低于自身的情况下随意往上变化而 `[minor]` 位不变化；如果 `[minor]` 版本位没有指定，则 `[major]`不变，`[minor]` 随意变化
        - `major.minor.x`：注意patch变化不能低于本身
        - `major.x`
    - 例如：
        - `~1.2.3` 等同于 `>=1.2.3 <1.3.0` 
        - `~1.2` 等同于 `1.2.x`
        - `~1` 等同于 `1.x`
        - `~0.2.3` 等同于 `>=0.2.3 <0.3`
        - `~0.2` 等同于 `0.2.x`
        - `~0` 等同于 `0.x`
- **Caret Ranges**：`^1.2.3`、`^0.2.5`
    - 大版本号`[major]`不变
    - **`^version`** 
        - 若version为`>=1.0.0`，则其范围相当与`major.x`，minor和patch均可更新
        - 若version为`0.x && >=0.1.0`，则仅patch位能更新
        - 若version为`<0.1.0`，则major、minor、patch都不能更新
    - 规律：
        1. if( major >= 1) minor&patch
        2. else if ( minor >= 1) patch
        3. else none
    - 例如：
        - `^1.2.x` 等同于 `>=1.2.0 <2.0.0`
        - `^0.2.3` 等同于 `>=0.2.3 <0.3.0` 等同于 `~0.2.3`
        - `^0.0.3` 等同于 `>=0.0.3 <0.0.4`
        - `^0.0.x` 等同于 `>=0.0.0 <0.1.0`
        - `^0.0` 等同于 `>=0.0.0 <0.1.0`
        - `^1.x` 等同于 `>=1.0.0 <2.0.0`
        - `^0.x` 等同于 `>=0.0.0 <1.0.0`
    

### Range Grammar

```sh
range-set  ::= range ( logical-or range ) *
logical-or ::= ( ' ' ) * '||' ( ' ' ) *
range      ::= hyphen | simple ( ' ' simple ) * | ''
hyphen     ::= partial ' - ' partial
simple     ::= primitive | partial | tilde | caret
primitive  ::= ( '<' | '>' | '>=' | '<=' | '=' | ) partial
partial    ::= xr ( '.' xr ( '.' xr qualifier ? )? )?
xr         ::= 'x' | 'X' | '*' | nr
nr         ::= '0' | ['1'-'9'] ( ['0'-'9'] ) *
tilde      ::= '~' partial
caret      ::= '^' partial
qualifier  ::= ( '-' pre )? ( '+' build )?
pre        ::= parts
build      ::= parts
parts      ::= part ( '.' part ) *
part       ::= nr | [-0-9A-Za-z]+
```

## Functions

暂略


