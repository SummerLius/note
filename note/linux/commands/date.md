# date

## 概述

<!--
时间格式转换符 
日期格式转换符 
字面格式转换符 
填充和其它标志
设置时间
date选项
date示例
 -->

- 地址
    - [GNU coreutils/date](https://www.gnu.org/software/coreutils/manual/coreutils.html#date-invocation)
- 简述
    - 显示或设置当前系统时间
- 语法
    - 显示：`date [OPTION]... [+FORMAT]`
    - 设置：`date [-u|--utc|--universal] [MMDDhhmm[[CC]YY][.ss]]`
    - 说明：如果参数以加号“+”，则表示显示时间。
- 选项
    - -d 或 --date=STRING：
        - 显示STRING指示的时间，而非系统当前时间。
        - STRING可以是任意通用的格式。它可以包含月份名，时区，“AM”，“yesterday”等等。
        - 注意，STRING必须是与语言环境无关的格式。例如，需要LC_TIME = C以在许多语言环境中打印正确的日期：`date -d "$(LC_TIME=C date)"`，（这个目前需不是很理解）
        - 详情可以查阅：**[Date input formats](https://www.gnu.org/software/coreutils/manual/coreutils.html#Date-input-formats)**
    - -s 或 --set=STRING：
        - 以STRING指示时间设置
    - -f 或 --file=DATEFILE：
    - -I[TIMESPEC] 或 --iso-8601[=TIMESPEC]：
        - 以ISO 8601格式显示日期/时间。
        - 其中TIMESPEC默认为“date”，还可以指定其它值，使其显示更加完整：“date”，“hours”，“minutes”，“seconds”，“ns”。
    - -R, --rfc-2822
        - 以RFC 2822格式显示时间。
    - --rfc-3339=TIMESPEC
        - 以RFC 3339格式显示时间。
    - -r, --reference=FILE
        - 显示文件上次修改的时间
    - -u，--utc，--universal
        - 显示或设置utc时间
- 显示格式（FORMAT）
    - 时间
        - %H：小时（00 ~ 23）
        - %I：小时（01 ~ 12）
        - %k：小时（00 ~ 23），以空格填充，同%_H
        - %l：小时（1 ~ 12），以空格填充，同%_I
        - %M：分钟（00 ~ 59），
        - %N：纳秒（000000000 ~ 999999999）
        - %p：本地时区，显示 “AM” 或 “PM”
        - %P：本地时区，同%p类似，是其的小写
        - %r：本地时区，的12小时制显示。例如“11:11:04 PM”
        - %R：24小时制小时和分钟的显示
        - %s：自UTC 时间 1970-01-01 00:00:00 以来所经过的秒数
        - %S：秒（00 ~ 60）
        - %T：24小时制小时，分钟和秒的显示。例如：“%H:%M:%S”
        - %X：本地时区，时间表示。例如“23:13:48”
        - %z：显示时区，“+hhmm”，例如北京时区“+0800”
        - %:z：显示时区，“+hh:mm”，例如北京时区“+08:00”
        - %::z：显示时区，“+hh:mm:ss”，例如北京时区“+08:00:00”
        - %:::z：显示时区，范围为“+hh”~“+hh:mm:ss”，即后面的0可以省略，例如北京时区“+80:00:00”为“+80”
        - %Z：按字母表时区缩写。
    - 日期
        - %a：本地时区，星期名称缩写，例如“Sun”，“周日”
        - %A：本地时区，本地星期名称全程，例如“Sunday”，“星期天”
        - %b：本地时区，月份名称缩写，例如“Jan”，“1月”
        - %B：本地时区，月份名称全程，例如“January”，“一月”
        - %c：本地时区，日期和时间，例如“Thu Mar  3 23:05:25 2005”
        - %C：世纪。有点像%Y，只是将%Y的后面两位数字省略了，例如，若%Y为2000，那么%C为20
        - %d：月份中的第几天。例如“01”
        - %D：日期。例如“%m/%d/%y”
        - %e：月份中的第几天，并且以空格填充，同“%_d”
        - %F：ISO 8601完整格式，同“%Y-%m-%d”。
        - %g：
        - %G：
        - %h：同%b
        - %j：一年中第几天（001 ~ 366）
        - %m：月份（01 ~ 12）
        - %q：季度（1 ~ 4），测试无效
        - %u：一周中第几天（1 ~ 7）
        - %U：一年中第几周，以周日作为第一天（00 ~ 53）。
        - %V：ISO格式下的，一年中第几周，以周一作为第一天（01 ~ 53）。
        - %w：一周中的第几天（0 ~ 6），以0表示周日。
        - %W：一年中的第几周，以周一作为第一天（00 ~ 53）。
        - %x：本地时区，日期表示，例如“12/31/99”
        - %y：年份最后两个数字
        - %Y：年份
    - 字面量
        - %%：百分号字符%
        - %n：换行符
        - %t：制表符
- 填充和其它标志
    - date默认以 `0` 来填充数字字段，例如月份数字总是以两个数字显示。
    - 以下可选标记可以跟在 % 后：
        - `-`（连字符），不填充该域
        - `_`（下划线），以空格填充
        - `0`（数字0），以0填充
        - `#`，如果可能的话，将字符的大小写反转
    - 你还可以将字段宽度（在任何标志之后，如果存在）指定为十进制数。
    - 一个可选的修饰符跟在标志和指定的字段宽度后面，
        - E：
            - 使用区域设置的替代表示形式来显示日期和时间。 此修饰符适用于'％c'，'％C'，'％x'，'％X'，'％y'和'％Y'转换说明符。 例如，在日语语言环境中，'％Ex'可能会生成基于日本皇帝统治的日期格式。
        - O：
            - 使用区域设置的替代数字符号表示数字。 此修饰符仅适用于数字转换说明符。
        - 如果format支持修饰符但没有可用的替代表示，则忽略该格式。
- 设置时间
    - 待整理...


## 示例

```sh
date -d "now" "+%Y%m%d"
date -d "yesterday" "+%Y%m%d"


date --date='2 days ago'
date --date='3 months 1 day'
date --date='25 Dec' +%j
date '+%B %d'
date -d 1may '+%B %-d'
date +%m%d%H%M%Y.%S
date --set='+2 minutes'
date --date='1970-01-01 00:02:00 +0000' +%s

# local time zone used
date --date='1970-01-01 00:02:00' +%s

date --date='2000-01-01 UTC' +%s
date -u --date=2000-01-01 +%s

# local time zone used
date -d '1970-01-01 UTC 946684800 seconds' +"%Y-%m-%d %T %z"

date -d @946684800 +"%F %T %z"
date -u -d '1970-01-01 946684800 seconds' +"%Y-%m-%d %T %z"
```

- 语言环境
    ```sh
    # linux/bash
    env | grep LANG
    > LANG=en_US.UTF-8

    # win/git-bash
    env | grep LANG
    > LANG=zh_CN.UTF-8
    ```